# DDDとは？
DDDは、「技術」ではなく、「業務 (ドメイン)」を中心にソフトウェア設計をする手法のこと。

# DDDの思想
### DDD専用の用語について

#### ① ユビキタス言語
エンジニアとビジネスサイド(企画者など)が「共通の言葉」を使うこと。コードの中の変数名と企画書の中の言葉を完全に一致させるための言語。

ユーザーがマッチングした時、、、、
これをコード上でもUserクラス、Match()メソッドと名付ける。

#### ② 境界づけられたコンテキスト (Bounded Context)
言葉の意味が通じる「範囲」を明確に区切ること。巨大なシステムでは、同じProductという言葉でも、部署によって意味が変わってくる。

- ECサイトの例：
    - 配送担当にとっての「商品」：重さ、サイズ、在庫場所が重要になる。
    - 販売担当にとっての「商品」：価格、説明文、セール期間が重要になる。

人によって商品の解釈が異なる。
これをDDDは、無理に1つのProductクラスにまとめることはせず、「配送コンテキストのProduct」と「販売コンテキストのProduct」を別々のクラスとして作る。


# DDDの実装部分
DDDで実装する部品のこと

① エンティティ (Entity)
IDで区別されるオブジェクトのこと。中身のデータが変わっても、IDが同じなら同じものとして扱う。

例：
Userの名前を変えたとしても、IDが123ならそれは同じユーザーである。

② 値オブジェクト (Value Object)
値そのもので区別されるオブジェクト。不変であり、値を変更するときは新しいオブジェクトを作る。

例：1万円
金は、製造番号IDや1万円というお金としての価値(Value)がある。

#### エンティティ(識別が必要なもの)：通帳、口座

- 銀行口座
    - ID：口座番号
    - Value：残高 (1万円、10万円)

残高が1万円から10万円に変わっても、その口座番号は同じである。識別子があるからこそどの口座かが分かる。

#### 値オブジェクト (識別が不要なもの)：お金の価値

- 1万円という価値
    - Aさんが、財布C,Dを持っている時、Cに入っている1万円をDに移しても、Aの資産価値は変わらない。
    - システム上で1万を支払う場合、その1000がどの製造番号のお札かまでをシステムが知る必要はない。あくまで、お金の価値が1万ですよという価値のみを知っていればいい。つまり、IDが不要で値の価値(1万、10万)で区別が行えるということ。

③ 集約 (Aggregate)
必ず整合性を保ちたいデータの塊のこと。トランザクションで一単位になる。

- 例：Order(注文)とOrderItem(注文明細)
    - 注文明細だけを勝手にDBに保存して、親の注文が存在しないという状況は許されない。
    - 必ずOrderを通してOrderItemを操作するように制限する。

④ リポジトリ (Repository)
集約を保存したり、取り出したりするDBの永続化処理をinterfaceで抽象化する役割。

⑤ ドメインサービス (Domain Service)
モノ (Entity/Value Object)に持たせるには不自然な「操作、アクション」を引き受ける場所のこと。